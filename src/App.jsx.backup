import { createContext, useContext, useState } from 'react'
import { BrowserRouter as Router, Routes, Route, Link, useLocation } from 'react-router-dom'
import { motion } from 'framer-motion'
import { 
  Globe, 
  TrendingUp, 
  Users, 
  Mail, 
  Linkedin, 
  ExternalLink,
  Menu,
  X,
  ArrowRight,
  MapPin,
  Languages
} from 'lucide-react'
import { Button } from '@/components/ui/button.jsx'
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card.jsx'
import Hero3D from './components/Hero3D'
import './App.css'

// Language Context
const LanguageContext = createContext()

const translations = {
  it: {
    nav: {
      home: 'Home',
      about: 'Chi Sono',
      services: 'Servizi',
      projects: 'Progetti',
      insights: 'Insights',
      contact: 'Contatti'
    },
    home: {
      stats: {
        experience: 'Anni di Esperienza',
        markets: 'Mercati USA Principali',
        partnerships: 'Partnership Strategiche',
        ceo: 'Lab101 Srl'
      }
    }
  },
  en: {
    nav: {
      home: 'Home',
      about: 'About',
      services: 'Services',
      projects: 'Projects',
      insights: 'Insights',
      contact: 'Contact'
    },
    home: {
      stats: {
        experience: 'Years of Experience',
        markets: 'Main US Markets',
        partnerships: 'Strategic Partnerships',
        ceo: 'Lab101 Srl'
      }
    }
  }
}

function LanguageProvider({ children }) {
  const [language, setLanguage] = useState('it')
  const t = translations[language]
  
  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  )
}

function useLanguage() {
  return useContext(LanguageContext)
}

// Navigation Component
function Navigation() {
  const [isOpen, setIsOpen] = useState(false)
  const { language, setLanguage, t } = useLanguage()
  const location = useLocation()
  
  const navItems = [
    { path: '/', label: t.nav.home },
    { path: '/about', label: t.nav.about },
    { path: '/services', label: t.nav.services },
    { path: '/projects', label: t.nav.projects },
    { path: '/insights', label: t.nav.insights },
    { path: '/contact', label: t.nav.contact }
  ]
  
  return (
    <nav className="fixed top-0 w-full bg-white/90 backdrop-blur-sm shadow-sm z-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between items-center h-16">
          <Link to="/" className="text-2xl font-bold text-blue-900">
            Gianluca Piazza
          </Link>
          
          {/* Desktop Navigation */}
          <div className="hidden md:flex items-center space-x-8">
            {navItems.map((item) => (
              <Link
                key={item.path}
                to={item.path}
                className={`text-gray-700 hover:text-blue-900 transition-colors ${
                  location.pathname === item.path ? 'text-blue-900 font-semibold' : ''
                }`}
              >
                {item.label}
              </Link>
            ))}
            <button
              onClick={() => setLanguage(language === 'it' ? 'en' : 'it')}
              className="flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-100 text-blue-900 hover:bg-blue-200 transition-colors"
            >
              <Languages size={18} />
              {language === 'it' ? 'EN' : 'IT'}
            </button>
          </div>
          
          {/* Mobile menu button */}
          <button
            className="md:hidden"
            onClick={() => setIsOpen(!isOpen)}
          >
            {isOpen ? <X size={24} /> : <Menu size={24} />}
          </button>
        </div>
        
        {/* Mobile Navigation */}
        {isOpen && (
          <div className="md:hidden pb-4">
            {navItems.map((item) => (
              <Link
                key={item.path}
                to={item.path}
                className="block py-2 text-gray-700 hover:text-blue-900"
                onClick={() => setIsOpen(false)}
              >
                {item.label}
              </Link>
            ))}
          </div>
        )}
      </div>
    </nav>
  )
}

// Home Page with 3D Hero
function HomePage() {
  const { t } = useLanguage()
  
  return (
    <div>
      {/* Hero 3D Section */}
      <Hero3D />
      
      {/* Stats Section */}
      <section className="py-16 bg-white">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true }}
              className="p-6"
            >
              <div className="text-5xl font-bold text-blue-900 mb-2">15+</div>
              <div className="text-gray-600">{t.home.stats.experience}</div>
            </motion.div>
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true }}
              transition={{ delay: 0.1 }}
              className="p-6"
            >
              <div className="text-5xl font-bold text-blue-900 mb-2">3</div>
              <div className="text-gray-600">{t.home.stats.markets}</div>
            </motion.div>
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true }}
              transition={{ delay: 0.2 }}
              className="p-6"
            >
              <div className="text-5xl font-bold text-blue-900 mb-2">50+</div>
              <div className="text-gray-600">{t.home.stats.partnerships}</div>
            </motion.div>
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true }}
              transition={{ delay: 0.3 }}
              className="p-6"
            >
              <div className="text-5xl font-bold text-blue-900 mb-2">CEO</div>
              <div className="text-gray-600">{t.home.stats.ceo}</div>
            </motion.div>
          </div>
        </div>
      </section>
      
      {/* Services Preview */}
      <section className="py-20 bg-gray-50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="text-center mb-16">
            <h2 className="text-4xl font-bold text-gray-900 mb-4">Aree di Competenza</h2>
            <p className="text-xl text-gray-600">Servizi specializzati per la crescita internazionale</p>
          </div>
          
          <div className="grid md:grid-cols-3 gap-8">
            {[
              {
                icon: <Globe className="w-12 h-12 text-blue-600" />,
                title: 'Internazionalizzazione',
                description: 'Strategia completa per l\'espansione nei mercati globali, con focus sui mercati USA.'
              },
              {
                icon: <TrendingUp className="w-12 h-12 text-blue-600" />,
                title: 'Business Development',
                description: 'Sviluppo di nuove opportunità e partnership strategiche per accelerare la crescita.'
              },
              {
                icon: <Users className="w-12 h-12 text-blue-600" />,
                title: 'Partnership & Negoziazione',
                description: 'Esperienza con grandi catene retail: Walmart, Starbucks, Target, Publix.'
              }
            ].map((service, index) => (
              <motion.div
                key={index}
                initial={{ opacity: 0, y: 20 }}
                whileInView={{ opacity: 1, y: 0 }}
                viewport={{ once: true }}
                transition={{ delay: index * 0.1 }}
              >
                <Card className="h-full hover:shadow-lg transition-shadow">
                  <CardHeader>
                    <div className="mb-4">{service.icon}</div>
                    <CardTitle>{service.title}</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <p className="text-gray-600">{service.description}</p>
                  </CardContent>
                </Card>
              </motion.div>
            ))}
          </div>
        </div>
      </section>
      
      {/* CTA Section */}
      <section className="py-20 bg-gradient-to-r from-blue-900 to-blue-700 text-white">
        <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
          <h2 className="text-4xl font-bold mb-6">Pronto a Espandere il Tuo Business?</h2>
          <p className="text-xl mb-8">
            Trasforma la tua visione globale in realtà. Contattami per una consulenza personalizzata.
          </p>
          <Link to="/contact">
            <Button size="lg" className="bg-white text-blue-900 hover:bg-blue-50">
              Richiedi una Consulenza
              <ArrowRight className="ml-2" size={20} />
            </Button>
          </Link>
        </div>
      </section>
    </div>
  )
}

// Placeholder pages
function AboutPage() {
  return (
    <div className="pt-20 min-h-screen bg-gray-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
        <h1 className="text-4xl font-bold mb-8">Chi Sono</h1>
      </div>
    </div>
  )
}

function ServicesPage() {
  return (
    <div className="pt-20 min-h-screen bg-gray-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
        <h1 className="text-4xl font-bold mb-8">Servizi</h1>
      </div>
    </div>
  )
}

function ProjectsPage() {
  return (
    <div className="pt-20 min-h-screen bg-gray-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
        <h1 className="text-4xl font-bold mb-8">Progetti</h1>
      </div>
    </div>
  )
}

function InsightsPage() {
  return (
    <div className="pt-20 min-h-screen bg-gray-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
        <h1 className="text-4xl font-bold mb-8">Insights</h1>
      </div>
    </div>
  )
}

function ContactPage() {
  return (
    <div className="pt-20 min-h-screen bg-gray-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
        <h1 className="text-4xl font-bold mb-8">Contatti</h1>
      </div>
    </div>
  )
}

// Footer Component
function Footer() {
  return (
    <footer className="bg-gray-900 text-gray-300 py-12">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="grid md:grid-cols-3 gap-8">
          <div>
            <h3 className="text-white text-lg font-semibold mb-4">Gianluca Piazza</h3>
            <p className="text-sm">
              Consulente Internazionalizzazione | Business Developer | Entrepreneur
            </p>
          </div>
          
          <div>
            <h3 className="text-white text-lg font-semibold mb-4">Contatti</h3>
            <ul className="space-y-2 text-sm">
              <li className="flex items-center gap-2">
                <MapPin size={16} />
                Monteviale, Veneto, Italy
              </li>
              <li>
                <a 
                  href="https://www.linkedin.com/in/gianlucapiazza/" 
                  target="_blank" 
                  rel="noopener noreferrer"
                  className="flex items-center gap-2 hover:text-white transition-colors"
                >
                  <Linkedin size={16} />
                  LinkedIn
                </a>
              </li>
              <li>
                <a 
                  href="https://www.lab101.it" 
                  target="_blank" 
                  rel="noopener noreferrer"
                  className="flex items-center gap-2 hover:text-white transition-colors"
                >
                  <ExternalLink size={16} />
                  Lab101 Srl
                </a>
              </li>
            </ul>
          </div>
          
          <div>
            <h3 className="text-white text-lg font-semibold mb-4">Link Rapidi</h3>
            <ul className="space-y-2 text-sm">
              <li><Link to="/about" className="hover:text-white transition-colors">Chi Sono</Link></li>
              <li><Link to="/services" className="hover:text-white transition-colors">Servizi</Link></li>
              <li><Link to="/projects" className="hover:text-white transition-colors">Progetti</Link></li>
              <li><Link to="/contact" className="hover:text-white transition-colors">Contatti</Link></li>
            </ul>
          </div>
        </div>
        
        <div className="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
          <p>&copy; {new Date().getFullYear()} Gianluca Piazza. All rights reserved.</p>
        </div>
      </div>
    </footer>
  )
}

// Main App Component
function App() {
  return (
    <LanguageProvider>
      <Router>
        <div className="min-h-screen">
          <Navigation />
          <Routes>
            <Route path="/" element={<HomePage />} />
            <Route path="/about" element={<AboutPage />} />
            <Route path="/services" element={<ServicesPage />} />
            <Route path="/projects" element={<ProjectsPage />} />
            <Route path="/insights" element={<InsightsPage />} />
            <Route path="/contact" element={<ContactPage />} />
          </Routes>
          <Footer />
        </div>
      </Router>
    </LanguageProvider>
  )
}

export default App
